#
# ~/.config/sway/config
# Wayland tiling window manager
# Read `man 5 sway` for a complete reference.
#

###############    Includes    ###############

include autostart
include colors
include keyboard
include pointer
include touchpad
include variables

###############    Sway settings    ###############

# Borders
default_border pixel 3
smart_borders no_gaps

# Gaps
gaps outer 0
gaps inner 10
smart_gaps on

# Font
font pango:CaskaydiaCove Nerd Font Mono Light 14

# Mod key. Use Mod1 for Alt.
set $mod Mod4

# Direction keys
set $up    l
set $down  k
set $left  j
set $right semicolon

###############    Bindings    ###############

# Turn off screen on lid closed
set $laptop eDP-2
bindswitch lid:on  output $laptop disable
bindswitch lid:off output $laptop enable

# kill focused window
bindsym $mod+Shift+q kill
bindsym Mod1+q       kill
bindsym Mod1+F4      kill

# core applications
bindsym $mod+Return       exec $term
bindsym Mod1+Shift+Return exec $term
bindsym $mod+t            exec $term
bindsym $mod+g            exec $dock
bindsym $mod+e            exec $editor
bindsym $mod+Shift+w      exec $browser
bindsym $mod+d            exec $launcher
bindsym Mod1+F1           exec $launcher
bindsym $mod+f            exec $filemanager
bindsym $mod+n            exec swaync-client -t -sw

# Exit menu
set $exit "[l]ock [e]xit [s]leep [h]ibernate [r]eboot [p]oweroff"
mode $exit {
    bindsym l exec "swaymsg mode 'default' && playerctl -s pause || true && lockscreen"
    bindsym e exec "swaymsg mode 'default' && swaymsg exit"
    bindsym s exec "swaymsg mode 'default' && systemctl -i suspend-then-hibernate"
    bindsym h exec "swaymsg mode 'default' && systemctl -i hibernate"
    bindsym r exec "swaymsg mode 'default' && systemctl -i reboot"
    bindsym p exec "swaymsg mode 'default' && systemctl -i poweroff"
    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym space  mode "default"
}
bindsym $mod+Shift+x mode $exit

# Screen shot menu
set $screenshot "screenshot: [a]rea [f]ocused [w]indow [o]utput [s]creen"
mode $screenshot {
    bindsym a exec "swaymsg mode 'default' && screenshot area"
    bindsym f exec "swaymsg mode 'default' && screenshot focused"
    bindsym w exec "swaymsg mode 'default' && screenshot window"
    bindsym o exec "swaymsg mode 'default' && screenshot output"
    bindsym s exec "swaymsg mode 'default' && screenshot screen"
    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym space  mode "default"
}
bindsym Print mode $screenshot

# Audio
bindsym XF86AudioPlay        exec "playerctl play-pause"
bindsym XF86AudioNext        exec "playerctl next"
bindsym XF86AudioPrev        exec "playerctl previous"
bindsym XF86AudioStop        exec "playerctl stop"
bindsym XF86AudioMute        exec "volumectl toggle-mute"
bindsym XF86AudioMicMute     exec "volumectl -m %"
bindsym XF86AudioRaiseVolume exec "volumectl -u up"
bindsym XF86AudioLowerVolume exec "volumectl -u down"

# Backlight
bindsym XF86MonBrightnessDown exec "lightctl down"
bindsym XF86MonBrightnessUp   exec "lightctl up"

# Keyboard leds
bindsym XF86KbdBrightnessDown exec "keyboard-leds down"
bindsym XF86KbdBrightnessUp   exec "keyboard-leds up"
bindsym XF86Launch3           exec "keyboard-leds next"

# Touchpad
bindsym XF86TouchpadToggle input type:touchpad events toggle enabled disabled

# Fan profile
bindsym XF86Launch4 exec "asusctl profile -n"

# Reload the configuration file
bindsym $mod+Shift+c reload

###########          Workspace Bindings          ###############

# Switch to workspace
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

# Moving focused workspace
bindsym $mod+Mod1+Up       move workspace to output up
bindsym $mod+Mod1+Down     move workspace to output down
bindsym $mod+Mod1+Left     move workspace to output left
bindsym $mod+Mod1+Right    move workspace to output right
bindsym $mod+Mod1+KP_Up    move workspace to output up
bindsym $mod+Mod1+KP_Down  move workspace to output down
bindsym $mod+Mod1+KP_Left  move workspace to output left
bindsym $mod+Mod1+KP_Right move workspace to output right
bindsym $mod+Mod1+$up      move workspace to output up
bindsym $mod+Mod1+$down    move workspace to output down
bindsym $mod+Mod1+$left    move workspace to output left
bindsym $mod+Mod1+$right   move workspace to output right

# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

###############    Container/Window control    ###############

# Scratchpad
# Sway has a "scratchpad", which is a bag of holding for windows.
# You can send windows there and get them back later.

# Move the currently focused window to the scratchpad
bindsym $mod+Shift+z move scratchpad

# Show the next scratchpad window or hide the focused scratchpad window.
# If there are multiple scratchpad windows, this command cycles through them.
bindsym $mod+z scratchpad show

# Floating
# Drag floating windows by holding down $mod and left mouse button.
# Resize them with right mouse button + $mod.
# Despite the name, also works for non-floating windows.
# Change normal to inverse to use left mouse button for resizing and right
# mouse button for dragging.
bindsym           $mod+Space floating toggle
floating_modifier $mod       normal
mouse_warping     container

# Move your focus around
bindsym $mod+$up    focus up
bindsym $mod+$down  focus down
bindsym $mod+$left  focus left
bindsym $mod+$right focus right

# Or use $mod+[up|down|left|right]
bindsym $mod+Up    focus up
bindsym $mod+Down  focus down
bindsym $mod+Left  focus left
bindsym $mod+Right focus right

# Move focus to the parent container
bindsym $mod+p focus parent

# Move the focused window with the same, but add Shift
bindsym $mod+Shift+$up    move up
bindsym $mod+Shift+$down  move down
bindsym $mod+Shift+$left  move left
bindsym $mod+Shift+$right move right

# Ditto, with arrow keys
bindsym $mod+Shift+Up    move up
bindsym $mod+Shift+Down  move down
bindsym $mod+Shift+Left  move left
bindsym $mod+Shift+Right move right

# Resizing containers:
mode "resize" {
    bindsym $up    resize shrink height 10 ppt or 32px
    bindsym $down  resize grow   height 10 ppt or 32px
    bindsym $left  resize shrink width  10 ppt or 32px
    bindsym $right resize grow   width  10 ppt or 32px

    # Ditto, with arrow keys
    bindsym Up    resize shrink height 10 ppt or 32px
    bindsym Down  resize grow   height 10 ppt or 32px
    bindsym Left  resize shrink width  10 ppt or 32px
    bindsym Right resize grow   width  10 ppt or 32px

    # Return to default mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym space  mode "default"
}
bindsym $mod+r mode "resize"

# Size
bindsym Mod1+Up    resize shrink height 10 ppt or 32 px
bindsym Mod1+Down  resize grow   height 10 ppt or 32 px
bindsym Mod1+Left  resize shrink width  10 ppt or 32 px
bindsym Mod1+Right resize grow   width  10 ppt or 32 px

# layout toggle
bindsym Mod1+Tab layout toggle tabbed split
bindsym $mod+Tab layout toggle splitv splith

# container layout
bindsym $mod+h split h
bindsym $mod+v split v
bindsym $mod+Shift+t layout tabbed
bindsym $mod+Shift+s layout stacking
bindsym $mod+x layout toggle split

default_orientation auto

# switch to workspace with urgent window
for_window [urgent="latest"] focus
focus_on_window_activation   focus

# Make the current focus fullscreen
bindsym $mod+Shift+f fullscreen

###############    Border & Gaps    ###############

# changing border style
#bindsym $mod+n border normal
#bindsym $mod+y border pixel 1
#bindsym $mod+u border none

# change gaps
bindsym $mod+plus                gaps inner current plus  5
bindsym $mod+minus               gaps inner current minus 5
bindsym $mod+Shift+plus          gaps outer current plus  5
bindsym $mod+Shift+minus         gaps outer current minus 5
bindsym $mod+Control+plus        gaps inner all     plus  5
bindsym $mod+Control+minus       gaps inner all     minus 5
bindsym $mod+Control+Shift+plus  gaps outer all     plus  5
bindsym $mod+Control+Shift+minus gaps outer all     minus 5

###############    Application settings    ###############

for_window [app_id="" title="Picture in picture"]         floating enable, sticky enable
for_window [app_id="" title="Picture-in-Picture"]         floating enable, sticky enable
for_window [app_id="(?i)(?:azote)"]                       floating enable
for_window [app_id="(?i)(?:blueman-manager)"]             floating enable
for_window [app_id="(?i)(?:gnome-network-displays)"]      floating enable
for_window [app_id="(?i)(?:gsimplecal)"]                  floating enable
for_window [app_id="(?i)(?:nm-connection-editor)"]        floating enable
for_window [app_id="(?i)(?:pavucontrol)"]                 floating enable
for_window [app_id=".*"]                                 inhibit_idle fullscreen
for_window [app_id="firefox" title="^Library$"]           floating enable, border pixel 1, sticky enable
for_window [app_id="floating_shell"]                      floating enable, border pixel 1, sticky enable, resize set width 80 ppt height 70 ppt 
for_window [app_id="floating_shell_small"]             floating enable, border pixel 1, sticky enable, resize set width 40 ppt height 40 ppt
for_window [class=".*"]                        inhibit_idle fullscreen
for_window [title="(?i)(?:copying|deleting|moving)"]      floating enable
for_window [title=".* is sharing a window."]              move scratchpad
for_window [title=".* is sharing your screen."]           move scratchpad
for_window [title="Firefox — Sharing Indicator"]          floating enable
for_window [title="Save File"]                            floating enable
for_window [title="^wlay$"]                               floating enable

popup_during_fullscreen smart
